##############################################################################
#
# ICINGA.CFG - Autogenerated by Puppet
#
##############################################################################


log_file=/var/log/icinga/icinga.log

cfg_file=/etc/<%= @target %>/nagios_command.cfg  
cfg_file=/etc/<%= @target %>/nagios_contact.cfg
cfg_file=/etc/<%= @target %>/nagios_contactgroup.cfg
cfg_file=/etc/<%= @target %>/nagios_timeperiod.cfg
cfg_file=/etc/<%= @target %>/nagios_host.cfg     
cfg_file=/etc/<%= @target %>/nagios_hostgroups.cfg     
# cfg_file=/etc/<%= @target %>/nagios_hostextinfo.cfg  
cfg_file=/etc/<%= @target %>/nagios_service.cfg
cfg_file=/etc/<%= @target %>/nagios_servicegroups.cfg
# cfg_dir=/etc/nagios/ext
# cfg_dir=<% case @operatingsystem when "Ubuntu" then %>/etc/nagios-plugins/config<% end %>


object_cache_file=/var/cache/icinga/objects.cache
precached_object_file=/var/cache/icinga/objects.precache
resource_file=/etc/icinga/resource.cfg
status_file=/var/lib/icinga/status.dat
status_update_interval=10

icinga_user=nagios
icinga_group=nagios

check_external_commands=1
command_check_interval=-1
command_file=/var/lib/icinga/rw/icinga.cmd
external_command_buffer_slots=4096

lock_file=/var/run/icinga/icinga.pid
temp_file=/var/cache/icinga/icinga.tmp
temp_path=/tmp

log_rotation_method=d
log_archive_path=/var/log/icinga/archives
use_daemon_log=1
use_syslog=1
use_syslog_local_facility=0
syslog_local_facility=5
log_notifications=1
log_service_retries=1
log_host_retries=1
log_event_handlers=1
log_initial_states=0
log_current_states=1
log_external_commands=1
log_passive_checks=1
# log_external_commands_user=0
log_long_plugin_output=0

service_inter_check_delay_method=s
max_service_check_spread=30
service_interleave_factor=s
max_host_check_spread=30
max_concurrent_checks=0
check_result_reaper_frequency=10
max_check_result_reaper_time=30

check_result_path=/var/lib/icinga/spool/checkresults

max_check_result_file_age=3600

cached_host_check_horizon=15
cached_service_check_horizon=15
enable_predictive_host_dependency_checks=1
enable_predictive_service_dependency_checks=1
soft_state_dependencies=0

auto_reschedule_checks=0
auto_rescheduling_interval=30
auto_rescheduling_window=180

sleep_time=0.25

service_check_timeout=60
host_check_timeout=30
event_handler_timeout=30
notification_timeout=30
ocsp_timeout=5

retain_state_information=1
state_retention_file=/var/lib/icinga/retention.dat

retention_update_interval=60
use_retained_program_state=1

dump_retained_host_service_states_to_neb=1
use_retained_scheduling_info=1

retained_host_attribute_mask=0
retained_service_attribute_mask=0
retained_process_host_attribute_mask=0
retained_process_service_attribute_mask=0
retained_contact_host_attribute_mask=0
retained_contact_service_attribute_mask=0

interval_length=60

use_aggressive_host_checking=0
execute_service_checks=1
accept_passive_service_checks=1
execute_host_checks=1
accept_passive_host_checks=1

enable_notifications=1
enable_event_handlers=1
event_broker_options=-1

<% if @pnp4nagios == '1' %>
broker_module=/usr/lib/npcdmod.o config_file=/etc/pnp4nagios/npcd.cfg
process_performance_data=1
perfdata_timeout=5

service_perfdata_file=/var/log/pnp4nagios/service-perfdata
service_perfdata_file_template=DATATYPE::SERVICEPERFDATA\tTIMET::$TIMET$\tHOSTNAME::$HOSTNAME$\tSERVICEDESC::$SERVICEDESC$\tSERVICEPERFDATA::$SERVICEPERFDATA$\tSERVICECHECKCOMMAND::$SERVICECHECKCOMMAND$\tHOSTSTATE::$HOSTSTATE$\tHOSTSTATETYPE::$HOSTSTATETYPE$\tSERVICESTATE::$SERVICESTATE$\tSERVICESTATETYPE::$SERVICESTATETYPE$
service_perfdata_file_mode=a
service_perfdata_file_processing_interval=15
service_perfdata_file_processing_command=process-service-perfdata-file

host_perfdata_file=/var/log/pnp4nagios/host-perfdata
host_perfdata_file_template=DATATYPE::HOSTPERFDATA\tTIMET::$TIMET$\tHOSTNAME::$HOSTNAME$\tHOSTPERFDATA::$HOSTPERFDATA$\tHOSTCHECKCOMMAND::$HOSTCHECKCOMMAND$\tHOSTSTATE::$HOSTSTATE$\tHOSTSTATETYPE::$HOSTSTATETYPE$
host_perfdata_file_mode=a
host_perfdata_file_processing_interval=15
host_perfdata_file_processing_command=process-host-perfdata-file
<%  else %>
process_performance_data=0
<% end %>

<% if @distribution['member'] == 'client' %>
ocsp_command=submit_service_check
ochp_command=submit_host_check
obsess_over_services=1
obsess_over_hosts=1
<%   else %>
# ocsp_command=submit_service_check
# ocsp_command=submit_host_check
obsess_over_services=0
obsess_over_hosts=0
<% end %>

translate_passive_host_checks=1
passive_host_checks_are_soft=0
check_for_orphaned_services=1
check_for_orphaned_hosts=1

service_check_timeout_state=u
check_service_freshness=1
service_freshness_check_interval=60
check_host_freshness=0
host_freshness_check_interval=60
additional_freshness_latency=15
enable_flap_detection=1

low_service_flap_threshold=5.0
high_service_flap_threshold=20.0
low_host_flap_threshold=5.0
high_host_flap_threshold=20.0

date_format=iso8601

p1_file=<% case @operatingsystem when "Ubuntu" then %>/usr/lib/icinga/p1.pl<% when "OpenSuSE" then %>/usr/share/icinga/p1.pl<% end %>

enable_embedded_perl=1
use_embedded_perl_implicitly=1

stalking_event_handlers_for_hosts=0
stalking_event_handlers_for_services=0
# stalking_notifications_for_hosts=0
# stalking_notifications_for_services=0
illegal_object_name_chars=`~!$%^&*|'"<>?,()=
illegal_macro_output_chars=`~$&|'"<>

use_regexp_matching=0
use_true_regexp_matching=0

admin_email=root@localhost
admin_pager=pageroot@localhost

daemon_dumps_core=0

use_large_installation_tweaks=0
enable_environment_macros=1

debug_level=0
debug_verbosity=1
debug_file=/var/log/icinga/icinga.debug
max_debug_file_size=100000000

event_profiling_enabled=0
