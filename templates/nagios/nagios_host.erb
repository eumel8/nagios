<% @ace = 1
   if @distribution['member'] == 'master'
     @ace = 0
   end
%>

# autogenerated by puppet. do not touch

define host {
        name                      cloud-host
        check_command                  check-host-alive
        max_check_attempts             3
        active_checks_enabled          <%= @ace %>
        passive_checks_enabled         1
        event_handler_enabled          1
        flap_detection_enabled         1
        failure_prediction_enabled     1
        process_perf_data              1
        retain_status_information      1
        retain_nonstatus_information   1
        contact_groups                 group_email
        notification_interval          90
        notification_period            24x7
        notification_options           d,u,r
        notifications_enabled          1
        register                       0
}
<% @nd.each_pair do |k, v| -%>
define host {
  use cloud-host
      host_name <%= k %>.<%= v['domain'] %>
      address   <%= v['ip'] %>
}
<% end -%>

